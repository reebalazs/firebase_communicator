<!doctype html>
<html lang="en" ng-app="messaging">
<head>
  <meta charset="UTF-8">
  <title>FireBase messaging Demo</title>
  <link rel="stylesheet" type="text/css" href="./fb_messaging.css">
  <script src="./dist/jquery.min.js"></script>
  <!-- <script src="./dist/angular.min.js"></script> -->
  <script src="./dist/angular.unstable.min.js"></script>
</head>
<body ng-controller="MessagingController">
  <h1 ng-bind="heading"></h1>
  <div>
    <label for="username">Your name: </label><input type="text" ng-model="username" ng-change="updateUsername()" id="username">
  </div>

  <div class="users">
    <strong>Logged in users:</strong>
      <div class="user" ng-cloak ng-repeat="(name, user) in users | online">
	    {{name}}
		<input type="submit" ng-hide="username == name" data-username="{{name}}" ng-click="privateChat($event)" value="Private Chat">
      </div>
  </div>

  <p></p>
  <div class="messages" id="messagesDiv">
    <div class="message {{message.type}}" ng-cloak ng-repeat="message in messages | messageFilter:this" ng-bind-html-unsafe="message.prettyprint"></div>
  </div>
  
  <form ng-submit="addMessage()">
    <input type="text" ng-model="message" ng-trim="false" ng-click="helpClass = helpClass.split(' ')[0] + ' hidden'" placeholder="Message..." required>
    <input type="submit" id="submit" value="Send">
	<div class="helpMesssage" ng-class="helpClass" ng-bind="help"></div>
  </form>
  
  <script src="https://cdn.firebase.com/v0/firebase.js"></script>
  <script src="./dist/bower_components/angularFire/angularFire.js"></script>
  <script src="./fb_messaging.js"></script>
  <script src="./jquery.cookie.js"></script>
</body>
</html>